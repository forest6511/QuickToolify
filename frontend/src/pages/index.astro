---
// src/pages/index.astro
import Layout from '@/layouts/Layout.astro'
import MainContent from '@/components/MainContent'
import { getToolsByCategory } from '@/lib/data-utils'
import ToolItem from '@/components/ToolItem.astro'

// サーバーサイドでの事前処理
const tools = getToolsByCategory(null)
const categoryName = 'すべて'
---

<Layout title="QuickToolify - 便利なツールコレクション">
  <!-- サーバーサイドレンダリングによる初期表示 -->
  <h1 id="category-title" class="text-xl font-semibold mb-4">
    {categoryName}
  </h1>

  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
    {tools.map(tool => (
      <a
        href={tool.url}
        class="block tool-item"
        data-category-id={tool.categoryId}
        aria-label={`${tool.name}: ${tool.description}`}
        role="listitem"
      >
        <div class="p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 h-full">
          <div class="flex flex-col items-center h-full">
            <div
              class="w-12 h-12 flex items-center justify-center rounded-full mb-2"
              style={`background-color: ${tool.bg}; color: ${tool.text};`}
              aria-hidden="true"
            >
              <span>{tool.name.charAt(0)}</span>
            </div>
            <h3 class="text-lg font-semibold mb-1 text-center">
              {tool.name}
            </h3>
            <p class="text-sm text-gray-600 text-center flex-grow">
              {tool.description}
            </p>
          </div>
        </div>
      </a>
    ))}
  </div>

  <!-- クライアントサイドコンポーネント -->
  <div style="display: none;">
    <MainContent client:idle initialCategoryId={null} />
  </div>
</Layout>